# 华信贩卖系统 - 项目文件说明

## 项目概述
这是一个基于 **Spring Boot + MyBatis + Thymeleaf** 的销售管理系统，采用经典的 **MVC三层架构**（Controller-Service-Dao）。

---

## 文件结构说明

### 📁 项目配置文件
- **salesproj.iml** - IntelliJ IDEA 项目配置文件，定义项目模块信息

---

### 📁 实体类（Entity）- 数据模型
这些类对应数据库表，用于封装数据：

1. **Employee.java** - 员工实体类
   - 属性：员工ID (eId)、姓名 (eName)、密码 (ePassword)、部门ID (dId)
   - 用途：存储员工登录和基本信息

2. **Department.java** - 部门实体类
   - 属性：部门ID (dId)、部门名称 (dName)、权限 (dPermission)
   - 用途：存储部门信息，用于登录时的部门选择

3. **Supplier.java** - 供货商实体类
   - 属性：供货商ID、名称、地址、邮编、电话、传真、注册日期、员工、未付款金额等
   - 用途：存储供货商的完整信息

---

### 📁 数据访问层（DAO）- 数据库操作接口
定义数据库操作方法：

1. **EmployeeDao.java** - 员工数据访问接口
   - 方法：`findById(int eId)` - 根据员工ID查询员工信息
   - 注解：`@Mapper` - MyBatis映射器

2. **DepartmentDao.java** - 部门数据访问接口
   - 用途：查询所有部门信息

3. **SupplierDao.java** - 供货商数据访问接口
   - 用途：查询供货商信息（支持条件查询）

---

### 📁 MyBatis映射文件（XML）- SQL映射配置
将Java接口方法与SQL语句关联：

1. **Employee.xml** - 员工SQL映射
   - 定义：`resultMap` 映射数据库字段到Java对象属性
   - SQL：根据员工ID查询员工信息的SELECT语句

2. **Department.xml** - 部门SQL映射
   - 用途：定义部门相关的SQL查询语句

3. **Supplier.xml** - 供货商SQL映射
   - 功能：支持按供货商名称模糊查询（动态SQL）
   - SQL：包含 `<where>` 和 `<if>` 标签实现条件查询

---

### 📁 业务逻辑层（Service）- 业务处理
定义业务逻辑接口和实现：

#### 接口层：
1. **EmployeeService.java** - 员工业务接口
   - 方法：`login(Employee employee)` - 员工登录验证

2. **DepartmentService.java** - 部门业务接口
   - 方法：`searchAll()` - 查询所有部门

3. **SupplierService.java** - 供货商业务接口
   - 方法：`search(Supplier supplier)` - 搜索供货商（支持条件查询）

#### 实现层：
1. **EmployeeServiceImpl.java** - 员工业务实现
   - 功能：实现登录逻辑
     - 验证用户是否存在
     - 验证部门是否匹配
     - 验证密码是否正确
   - 异常处理：抛出相应的异常信息

2. **DepartmentServiceImpl.java** - 部门业务实现
   - 功能：实现查询所有部门的业务逻辑

3. **SupplierServiceImpl.java** - 供货商业务实现
   - 功能：实现供货商搜索的业务逻辑

---

### 📁 控制器层（Controller）- 请求处理
处理HTTP请求，调用Service层，返回视图：

1. **EmployeeController.java** - 员工控制器
   - `/tologin` - 跳转到登录页面，并加载部门列表
   - `/login` - 处理登录请求，验证用户信息，返回登录结果页面

2. **SupplierController.java** - 供货商控制器
   - `/supplierlist` - 供货商信息列表查询页面
   - 功能：接收查询条件，调用Service查询，返回列表页面

---

### 📁 前端页面（HTML + CSS）- 用户界面

1. **index.html** - 系统主页面
   - 标题：华信株式会社
   - 功能菜单：
     - 订单管理（订单输入）
     - 信息管理（供货商信息维护、商品信息维护）
   - 布局：左侧菜单 + 右侧iframe内容区

2. **login.html** - 登录页面
   - 表单字段：部门选择、员工编号、密码
   - 功能：提交登录信息到 `/login` 接口
   - 显示：错误提示信息

3. **list.html** - 供货商列表页面
   - 功能：供货商信息查询和展示
   - 表单：按供货商名称搜索
   - 表格：显示供货商编号、名称、电话、地址

4. **index.css** - 主页面样式文件
   - 样式：标题颜色、菜单和内容区布局（浮动布局）

---

### 📁 其他文件

1. **Main.java** - 主类（示例代码）
   - 说明：这是IntelliJ IDEA自动生成的示例代码
   - 注意：实际项目应该有一个Spring Boot启动类（通常命名为 `Application.java` 或 `XxxApplication.java`）

---

## 系统架构流程

```
用户请求 → Controller → Service → Dao → MyBatis XML → 数据库
                ↓
             返回视图 → HTML页面（Thymeleaf模板）
```

## 主要功能模块

1. **登录模块**
   - 员工登录验证
   - 部门选择
   - 密码验证

2. **供货商管理模块**
   - 供货商信息查询
   - 按名称模糊搜索
   - 信息列表展示

3. **订单管理模块** ✅
   - 订单输入：支持选择供货商、商品，自动计算总金额
   - 订单列表：支持按订单编号、日期、状态查询
   - 订单状态管理：待处理、已确认、已完成、已取消

4. **商品管理模块** ✅
   - 商品信息维护：新增、编辑、删除商品
   - 商品列表查询：支持按名称、编码、类别、状态查询
   - 商品信息管理：商品名称、编码、类别、单价、库存、供货商关联等

---

## 技术栈

- **后端框架**：Spring Boot
- **持久层框架**：MyBatis
- **模板引擎**：Thymeleaf
- **数据库**：未在代码中明确，但从SQL语句看应该是关系型数据库（MySQL/PostgreSQL等）
- **构建工具**：Maven/Gradle（需要查看pom.xml或build.gradle确认）

---

## 注意事项

1. 代码中使用了包名 `com.dhee.fanmaisystem.*`，但实际文件可能没有按包结构组织
2. `Main.java` 是示例代码，实际项目需要Spring Boot启动类
3. 缺少配置文件（application.properties/yml）和依赖管理文件（pom.xml/build.gradle）
4. 前端页面使用了Thymeleaf模板语法（`th:` 前缀）

